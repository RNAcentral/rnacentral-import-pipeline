params {

  databases {
    ena {
      fetch {
        remote = '/nfs/ftp/pub/databases/ena/non-coding/release'
        pattern = '*.ncr.gz'
      }

      extra {
        remotes = [
          'https://www.ebi.ac.uk/ena/data/xref/search?source=SGD&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=SRPDB&expanded=true&limit=0',
          // 'https://www.ebi.ac.uk/ena/data/xref/search?source=TAIR&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=WormBase&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=dictyBase&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=lncRNAdb&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=snOPYdb&expanded=true&limit=0',
          'https://www.ebi.ac.uk/ena/data/xref/search?source=tmRNA-Website&expanded=true&limit=0',
        ]
        pattern = 'tpa.tsv'
      }

    }

    ensembl {
      memory = '4 GB'

      fetch {
        remote = 'ftp://ftp.ensembl.org/pub/current_embl/**/*.dat.gz'
        pattern = '*.grouped.dat.gz'
        excluded_patterns = [
          'Mus_musculus_*',
          'Caenorhabditis_elegans*',
          'Drosophila_melanogaster*',
          'Saccharomyces_cerevisiae*',
        ]
      }

      mysql {
        host = 'ensembldb.ensembl.org'
        port = 5306
        user = 'anonymous'
      }
    }

    ensembl_genomes {
      mysql {
        host = 'mysql-eg-publicsql.ebi.ac.uk'
        port = 4157
        user = 'anonymous'
      }
    }

    ensembl_plants {
      memory = '4 GB'

      fetch {
        remote = '/nfs/ensemblgenomes/ftp/pub/plants/current/embl/'
        pattern = '*.grouped.dat.gz'
      }
    }

    gencode {
      as_single_task = false

      fetch {
        remotes = [
          'ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_human/release_29/gencode.v29.annotation.gff3.gz',
          'ftp://ftp.ebi.ac.uk/pub/databases/gencode/Gencode_mouse/release_M19/gencode.vM19.annotation.gff3.gz'
        ]
        pattern = 'gencode.gff3.gz'
      }
    }

    flybase {
      fetch {
        remote = 'ftp://ftp.flybase.net/releases/current/precomputed_files/genes/ncRNA*.json.gz'
        pattern = 'flybase_ncRNA.json.gz'
      }
    }

    lncbase {
      fetch {
        remote = '/nfs/production/xfam/users/bsweeney/provided-data/lncbase/LncBase2.json'
        pattern = 'LncBase2.json'
      }
    }

    lncipedia {
      fetch {
        remote = "https://lncipedia.org/downloads/lncipedia_5_2_rnacentral.json"
        pattern = 'lncipedia_5_2_rnacentral.json'
      }
    }

    mirbase {
      memory = '4 GB'

      fetch {
        remote = "http://micro.smith.man.ac.uk/~sam/download/mirbase22rnacentral.20180523.json"
        pattern = 'mirbase22rnacentral.20180523.json'
      }
    }

    pdb {
      fetch { pattern = 'pdb.json' }
      extra { pattern = 'pdb-extra.json' }
    }

    pombase {
      fetch {
        remote = 'ftp://ftp.pombase.org/nightly_update/misc/rnacentral.json'
        pattern = 'rnacentral.json'
      }
    }

    quickgo {
      group = "ontologies"
      memory = '4 GB'

      fetch {
        remote = '/ebi/ftp/pub/contrib/goa/goa_rna_all.gpa.gz'
        pattern = 'data.gpa'
      }
    }

    refseq {
      fetch {
        pattern = '*.gbff.gz'
      }
    }

    rfam {
      fetch {
        remote = '/hps/nobackup/production/xfam/rfam/RELEASES/14.0/rnacentral/json_files/'
        pattern = '*.json'
      }

      mysql {
        host = 'mysql-rfam-public.ebi.ac.uk'
        port = 4497
        user = 'rfamro'
        db_name = 'Rfam'
      }
    }

    rgd {
      fetch {
        remote = 'ftp://ftp.rgd.mcw.edu/pub/data_release/UserReqFiles/RAT_NUCLEOTIDE_SEQUENCES.fa.gz'
        pattern = 'RAT_NUCLEOTIDE_SEQUENCES.fa.gz'
      }

      extra {
        remote = 'ftp://ftp.rgd.mcw.edu/pub/data_release/GENES_RAT.txt'
        pattern = 'GENES_RAT.txt'
      }
    }

    tarbase {
      fetch {
        remote = '/nfs/production/xfam/users/bsweeney/provided-data/tarbase/TarBase8.json'
        pattern = 'TarBase8.json'
      }
    }

    zwd {
      fetch {
        remote = 'https://raw.githubusercontent.com/Rfam/rfam-zwd-import/master/zwd.json'
        pattern = 'zwd.json'
      }
    }
  }

  go_annotations {
    tair {
      remote = 'https://www.arabidopsis.org/download_files/GO_and_PO_Annotations/Gene_Ontology_Annotations/ATH_GO_GOSLIM.txt.gz'
    }
  }

  crs {
    path = '/nfs/production/xfam/rnacentral/crs/results/v20180914_1/rnacentral_crs_overlap_nostrand.*.tsv.gz'
  }

  import_data {
    chunk_size = 1024 * 1000 * 1000
    databases = [
      ena: false,
      ensembl: true,
      flybase: false,
      lncipedia: false,
      mirbase: false,
      pdb: false,
      rfam: false,
    ]
  }

  import_metadata {
    ensembl {
      max_forks = 4
    }

    publications {
      index_min = 1000
      remote = 'http://europepmc.org/ftp/pmclitemetadata/PMCLiteMetadata.tgz'
      pattern = "*.xml"
    }
  }

  precompute {
    max_entries = 2237839
    load_size = 1024 * 1000 * 1000
    maxForks = 4

    feedback {
      databases = [
        'flybase',
        'gencode',
        'hgnc',
        'lncipedia',
        'pombase',
        'tair',
        'wormbase',
      ]
    }

    methods {
      all = false
      using_release = true
      by_database = []
    }
  }

  genome_mapping {
    min_length = 20
    max_length = 100000
    num_seq = 1000

    blat_options {
      step_size = 5
      rep_match = 2253
      min_score = 0
      min_identity = 95
    }

    genomes = [
      'anopheles_gambiae',
      'arabidopsis_thaliana',
      'bombyx_mori',
      'caenorhabditis_elegans',
      'dictyostelium_discoideum',
      'drosophila_melanogaster',
      'homo_sapiens',
      'mus_musculus',
      'plasmodium_falciparum',
      'rattus_norvegicus',
      'saccharomyces_cerevisiae',
      'schizosaccharomyces_pombe',
    ]
  }

  search_export {
    max_forks = 6
    max_entries = 2237839
    schema = 'http://www.ebi.ac.uk/ebisearch/XML4dbDumps.xsd'
    publish = "${baseDir}/search-export"
    memory = '8 GB'
  }

  ftp_export {
    publish = "${baseDir}/ftp"
    ensembl {
      chunk_size = 100000
      maxForks = 15
    }

    coordinate {
      maxForks = 30
    }
  }

  qa {
    rfam_scan {
      clans = '/hps/nobackup/production/xfam/rfam/CMs/Rfam12_2.clanin'
      cm_files = '/hps/nobackup/production/xfam/rfam/RELEASES/14.0/cms/Rfam.cm*'
      cpus = 5
      cm_memory = 20000
      chunk_size = 3000
    }
  }
}

// local.config must should contain something like the following. I use profiles
// to help control the database I am working with:
// env {
//   PGDATABASE = "postgres://user:password@host:port/name"
// }
includeConfig "local.config"
